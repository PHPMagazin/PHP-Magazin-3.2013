class StreamReducer extends Emitor{  public function reduce() {    $this->onStartEmit();    while (($line = fgets(STDIN)) !== false) {      $line = trim($line);      list($key, $value) = explode(chr(9), $line);      $value *= 1;      if ($value > 0) {        if (isset($this->emits[$key]))          $this->emits[$key] += $value;        else          $this->emits[$key] = $value;      }       }    arsort($this->emits);    $this->onEndEmit();  }}